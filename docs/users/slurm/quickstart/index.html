<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-users/slurm/quickstart">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/cluster-docs/blog/rss.xml" title="HPCer Clusters Document RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cluster-docs/blog/atom.xml" title="HPCer Clusters Document Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="HPCer Clusters Document" href="/cluster-docs/opensearch.xml">
<script src="https://buttons.github.io/buttons.js" async defer="defer"></script><title data-rh="true">Slurm 基本用法 | HPCer Clusters Document</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hpcdoc.pages.hpcer.dev/cluster-docs/docs/users/slurm/quickstart"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Slurm 基本用法 | HPCer Clusters Document"><meta data-rh="true" name="description" content="用户使用集群时，通常会涉及以下操作："><meta data-rh="true" property="og:description" content="用户使用集群时，通常会涉及以下操作："><link data-rh="true" rel="icon" href="/cluster-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hpcdoc.pages.hpcer.dev/cluster-docs/docs/users/slurm/quickstart"><link data-rh="true" rel="alternate" href="https://hpcdoc.pages.hpcer.dev/cluster-docs/docs/users/slurm/quickstart" hreflang="en"><link data-rh="true" rel="alternate" href="https://hpcdoc.pages.hpcer.dev/cluster-docs/docs/users/slurm/quickstart" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/cluster-docs/assets/css/styles.ccdbfcb5.css">
<link rel="preload" href="/cluster-docs/assets/js/runtime~main.540aceb6.js" as="script">
<link rel="preload" href="/cluster-docs/assets/js/main.45e5c709.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cluster-docs/"><div class="navbar__logo"><img src="/cluster-docs/img/logo.svg" alt="HPCer Clusters Document Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/cluster-docs/img/logo.svg" alt="HPCer Clusters Document Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">HPCer Clusters Document</b></a><a class="navbar__item navbar__link navbar__link--active" href="/cluster-docs/docs/users/getting-started">User Manual</a><a class="navbar__item navbar__link" href="/cluster-docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hpcde/cluster-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Source on Git<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cluster-docs/docs/users/getting-started">首页</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cluster-docs/docs/users/cluster-overview">集群概况</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cluster-docs/docs/users/login/normal-login">登录到集群</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cluster-docs/docs/users/software/spack">软件与工具</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/cluster-docs/docs/users/slurm/basics">使用计算资源</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cluster-docs/docs/users/slurm/basics">Slurm 基本概念</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cluster-docs/docs/users/slurm/quickstart">Slurm 基本用法</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cluster-docs/docs/users/slurm/mpi-omp">提交 OpenMP/MPI 作业</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cluster-docs/docs/users/slurm/advanced">Slurm 高级用法</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cluster-docs/docs/users/debug/introduction">调试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cluster-docs/docs/users/profile/scorep">性能分析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cluster-docs/docs/users/question_and_answer">Q&amp;A</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cluster-docs/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">使用计算资源</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Slurm 基本用法</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Slurm 基本用法</h1></header><p>用户使用集群时，通常会涉及以下操作：</p><ul><li>查看集群信息</li><li>提交作业</li><li>取消作业</li><li>挂起/恢复作业</li><li>调整作业的属性</li><li>传输文件</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="常用命令">常用命令<a class="hash-link" href="#常用命令" title="Direct link to heading">​</a></h2><p>参考：</p><ul><li><a href="https://slurm.schedmd.com/" target="_blank" rel="noopener noreferrer">Slurm Workload Manager</a></li><li><a href="https://slurm.schedmd.com/pdfs/summary.pdf" target="_blank" rel="noopener noreferrer">Command/option Summary</a></li><li><a href="https://slurm.schedmd.com/man_index.html" target="_blank" rel="noopener noreferrer">Man Pages</a></li></ul><p>为满足用户查询、提交、管理作业等需求，Slurm 提供了相当丰富的命令行工具，其中最为常用的如下：</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td><code>sinfo</code></td><td>查看集群节点、节点分区等信息</td></tr><tr><td><code>squeue</code></td><td>查看作业队列、作业状态等信息</td></tr><tr><td><code>sacct</code></td><td>查看作业的计费信息，包括时长、资源使用量等</td></tr><tr><td><code>sattach</code></td><td>查看作业的标准输入输出</td></tr><tr><td><code>scancel</code></td><td>取消作业</td></tr><tr><td><code>salloc</code></td><td>申请计算资源</td></tr><tr><td><code>srun</code></td><td>提交一个作业步，在当前 shell 等待输出</td></tr><tr><td><code>sbatch</code></td><td>提交一个作业脚本，执行完成后结果输出到日志文件</td></tr><tr><td><code>scontrol</code></td><td>查看和修改各种 Slurm 对象，包括作业、节点、分区等</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="快速入门">快速入门<a class="hash-link" href="#快速入门" title="Direct link to heading">​</a></h2><p>参考：</p><ul><li><a href="https://slurm.schedmd.com/quickstart.html" target="_blank" rel="noopener noreferrer">Quick Start User Guide</a></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="查看集群状态">查看集群状态<a class="hash-link" href="#查看集群状态" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 检查当前是否有足够的空闲节点：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sinfo -t idle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查看当前的作业队列，看是否有很多作业在排列中</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ squeue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查看历史作业的计费信息，看自己的作业是不是成功结束了</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sacct</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="运行自己的程序-srun">运行自己的程序 (srun)<a class="hash-link" href="#运行自己的程序-srun" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 使用srun提交一个作业，等待标准输出</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># &quot;-N&quot;指定节点数为&quot;2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># &quot;-n&quot;指定总任务数为&quot;4&quot;，相当于说总共4个进程，每节点2个进程</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># &quot;-p&quot;指定节点分区名称为&quot;all&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># hostname是可执行文件，在这里我们仅仅让节点打印主机名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ srun -p all -N </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> -n </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hostname</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="运行自己的程序-sbatch">运行自己的程序 (sbatch)<a class="hash-link" href="#运行自己的程序-sbatch" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 写一个脚本文件，用&quot;#SBATCH&quot;向Slurm传递参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># &quot;-o slurm-log.txt&quot;指定日志文件的路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ping.slurm </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">END</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">#!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">#SBATCH -p all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">#SBATCH -N 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">#SBATCH -o slurm-log.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">srun ping -c 60 nodedata</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">END</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 提交作业，立即返回不等待标准输出</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sbatch ping.slurm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查看作业是否结束，状态为&quot;PD&quot;表示挂起，为&quot;R&quot;表示运行中，为&quot;CG&quot;表示正在结束</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ squeue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 把当前标准I/O绑到运行中的作业步上，以便实时查看输出</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#（假设作业号为31001，第一个作业步为31001.0）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sattach </span><span class="token number" style="color:#36acaa">31001.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 作业结束后，查看输出的日志文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> slurm-log.txt</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="仅申请资源-salloc">仅申请资源 (salloc)<a class="hash-link" href="#仅申请资源-salloc" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">## 申请计算资源，申请成功后会进入Slurm打开的shell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## &quot;-J test&quot;指名作业名称，便于在squeue命令中分辨自己的作业</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ salloc -p all -N </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> -J </span><span class="token builtin class-name">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## 在Slurm分配的shell中执行srun，仅能使用刚刚申请的2个节点</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ srun </span><span class="token function" style="color:#d73a49">hostname</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## 跳转到其中一个节点（假设为node08）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> node08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">hostname</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## 退出node08</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## 释放申请的资源，退出Slurm分配的shell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>需要使用大量计算资源的工作，如编译、执行并行程序等，都应该提交到计算节点，不要在登录节点执行。</p><p>计算所需的数据应该放在专门的目录中，如<code>$HOME/data</code>。</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="查看分区和节点信息">查看分区和节点信息<a class="hash-link" href="#查看分区和节点信息" title="Direct link to heading">​</a></h2><p>参考：</p><ul><li><code>$ man info</code></li><li><code>$ snodes --help</code></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="sinfo"><code>sinfo</code><a class="hash-link" href="#sinfo" title="Direct link to heading">​</a></h3><p>该命令用于查看当前集群的节点信息，包括分区和节点的数量、状态等。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ sinfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PARTITION AVAIL TIMELIMIT NODES STATE NODELIST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">all          up  infinite     </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> down* node</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">17</span><span class="token plain">-20</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">all          up  infinite     </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> alloc node</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">05-06</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">all          up  infinite     </span><span class="token number" style="color:#36acaa">6</span><span class="token plain">   mix node</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">07-12</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">all          up  infinite     </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">  idle node</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">21</span><span class="token plain">-23</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Balerion     up  infinite     </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> down* node</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">17</span><span class="token plain">-20</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Balerion     up  infinite     </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">  idle node</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">21</span><span class="token plain">-23</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Vhagar*      up  infinite     </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> alloc node</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">05-06</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Vhagar*      up  infinite     </span><span class="token number" style="color:#36acaa">6</span><span class="token plain">   mix node</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">07-12</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>命令默认输出以下字段：</p><ul><li><code>PARTITION</code>：节点的分区。每个任务都只能提交到分区中，不能跨分区。默认分区的名称后有 <code>*</code> 号；</li><li><code>AVAIL</code>：分区的状态。<code>UP</code> 表示分区可用；</li><li><code>TIMELIMIT</code>：分区对作业的时间限制。所有提交到该分区的作业都不能超过时间上限；</li><li><code>NODES</code>：分区中的节点数量。这是该分区所有可以分配给用户的计算节点；</li><li><code>STATE</code>：节点的状态。<code>down</code> 表示不可用，<code>idle</code> 表示空闲节点，<code>alloc</code> 表示已完全分配给用户使用，<code>mix</code> 表示已分配给用户，但仍有剩余的计算资源可用。同一分区可能会占据多个条目，这是因为分区中节点的状态不同；</li><li><code>NODELIST</code>：节点的名称。同一节点可以编入多个分区。</li></ul><p>我们可以给 <code>sinfo</code> 命令加上选项查看更详细的信息</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ sinfo -lN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NODELIST   NODES PARTITION       STATE CPUS    S:C:T MEMORY TMP_DISK WEIGHT AVAIL_FE REASON              </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node05         </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">   Vhagar*   allocated   </span><span class="token number" style="color:#36acaa">24</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">:6:2  </span><span class="token number" style="color:#36acaa">64156</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">10240</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> none</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node06         </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">   Vhagar*   allocated   </span><span class="token number" style="color:#36acaa">24</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">:6:2  </span><span class="token number" style="color:#36acaa">64156</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">10240</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> none</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node23         </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">  Balerion    drained*   </span><span class="token number" style="color:#36acaa">32</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">:8:2  </span><span class="token number" style="color:#36acaa">64155</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">10240</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Power saving</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><ul><li><code>CPUS</code>：节点的总CPU数量；</li><li><code>S:C:T</code>：节点的 Sockets(S)、Cores(C)、Threads(T) 数量；</li><li><code>MEMORY</code>：节点的可用内存；</li><li><code>TMP_DISK</code>：节点的可用临时存储空间；</li><li><code>WEIGHT</code>：节点被调度的优先级（权重）。</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>作业的默认时限</h5></div><div class="admonition-content"><p>使用 <code>sinfo</code> 直接能看到的是分区的最大时限（无穷大），不是默认时限。默认时限指的是一个作业在未给定时间限制时可以运行的时间上限。需要长时间运行的作业要注意在提交时设置时限，不要用默认值（可设为 <code>infinite</code>，但不推荐）。</p><p>实验室集群各分区的默认时限通常为两天。</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="snodes"><code>snodes</code><a class="hash-link" href="#snodes" title="Direct link to heading">​</a></h3><p>如果用户不记得 <code>sinfo</code> 的那些选项，可以使用 <code>snodes</code> 命令。</p><p>这个命令可以按节点、分区或状态来查看信息，包括分区名、节点名、状态、处理器数量、内存大小。它也能显示节点上的 CPU 资源的分配情况，见 <code>CPUS(A/I/O/T)</code> 一栏。</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>输出格式</h5></div><div class="admonition-content"><p>Slurm 的查询命令通常都接受用户自定义格式。<code>snodes</code> 其实就是个调用 <code>sinfo</code> 的脚本，它自己定义了一种输出格式。</p><p>可以打开这个脚本观察它是如何使用 <code>sinfo</code> 的</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">vi</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">which</span><span class="token variable" style="color:#36acaa"> snodes</span><span class="token variable" style="color:#36acaa">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="查看作业队列">查看作业队列<a class="hash-link" href="#查看作业队列" title="Direct link to heading">​</a></h2><p>参考：</p><ul><li><code>$ man squeue</code></li><li><code>$ showq --help</code></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="squeue"><code>squeue</code><a class="hash-link" href="#squeue" title="Direct link to heading">​</a></h3><p>该命令用于查看当前在队列中的作业。默认情况下它会显示作业已经运行的时间。它有许多参数可以帮助我们筛选队列中的作业，举例如下：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ squeue            </span><span class="token comment" style="color:#999988;font-style:italic"># 以默认配置显示队列中的作业</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ squeue -u slurm   </span><span class="token comment" style="color:#999988;font-style:italic"># 只显示slurm这个用户的作业</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ squeue -l         </span><span class="token comment" style="color:#999988;font-style:italic"># 以长格式显示，包括作业的时限</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ squeue -S +i      </span><span class="token comment" style="color:#999988;font-style:italic"># 按作业号升序排列</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ squeue -S -M      </span><span class="token comment" style="color:#999988;font-style:italic"># 按作业已执行时间降序排列</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="showq"><code>showq</code><a class="hash-link" href="#showq" title="Direct link to heading">​</a></h3><p>该命令也用于查看作业队列，但调整了输出信息的格式，增加了一些数量统计。要注意的是，它显示的时间有两个：</p><ul><li><p><code>REMAINING</code>：作业剩余的时间。每个作业提交时都有时限，这一栏显示了分配给作业的时间还剩余多少，而无剩余时间的作业会被强制结束；</p></li><li><p><code>STARTTIME</code>：作业的起始时间。</p></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="sacct---查看作业计费信息"><code>sacct</code> - 查看作业计费信息<a class="hash-link" href="#sacct---查看作业计费信息" title="Direct link to heading">​</a></h2><p>直接运行该命令，可以查看当前用户的计费信息，其中包括很多字段，例如运行时长、起止时间、最大内存占用、磁盘读写速度等等。因此，我们常用它来查看历史作业的信息。</p><p>通过相应的选项，我们可以指定要显示的历史作业的起止时间。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ sacct             </span><span class="token comment" style="color:#999988;font-style:italic"># 以默认配置显示历史记录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sacct -S 0301     </span><span class="token comment" style="color:#999988;font-style:italic"># 从3月1日起所有的记录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sacct -E 0312     </span><span class="token comment" style="color:#999988;font-style:italic"># 在3月12日之前的记录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sacct -S 0301 -s FAILED   </span><span class="token comment" style="color:#999988;font-style:italic"># 3月1日以来失败的作业</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>sacct</code> 加上 <code>-o</code> 或 <code>--format</code> 选项可以调整输出的格式，显示特定的字段。不带任何参数时，<code>sacct</code> 会显示 7 个字段。以下两条命令可显示相同的字段：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ sacct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sacct -o </span><span class="token string" style="color:#e3116c">&quot;JobID,JobName,Partition,Account,AllocCPUS,State,ExitCode&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>有时我们想知道历史作业执行了多长时间，可以使用 <code>-o Elapsed</code> 或 <code>-o ElapsedRaw</code>。</p><p>所有可显示的字段可以通过以下命令查看：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ sacct -e</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>作业运行时的信息</h5></div><div class="admonition-content"><p><code>sacct</code> 虽然能查看历史作业的一些信息，但并不是全部。它输出的信息通常都来源于 Slurm 的数据库，是一些用于计费的统计信息。像作业提交脚本这样的内容并不会被记录。</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="scontrol-show---查看-slurm-配置"><code>scontrol show</code> - 查看 Slurm 配置<a class="hash-link" href="#scontrol-show---查看-slurm-配置" title="Direct link to heading">​</a></h2><p><code>scontrol</code> 是管理 Slurm 配置用的命令，<code>show</code> 是它的子命令，可以用于查看很多信息，比如分区、节点、作业的详细信息。</p><p>查看所有分区信息/查看某个分区的信息：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ scontrol show partition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ scontrol show Vhagar</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>查看所有节点信息/查看某个节点的信息：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ scontrol show </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ scontrol show </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> node05</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>查看所有作业信息/查看某个作业的信息：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ scontrol show job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ scontrol show job </span><span class="token number" style="color:#36acaa">103</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>已结束作业的信息</h5></div><div class="admonition-content"><p>目前，实验室集群上的作业只有在运行时才能用 <code>scontrol show</code> 查看它的信息，在结束以后只留下计费数据在数据库中。计费数据使用 <code>sacct</code> 查看。</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="如何提交作业">如何提交作业<a class="hash-link" href="#如何提交作业" title="Direct link to heading">​</a></h2><p>参考：</p><ul><li><a href="https://slurm.schedmd.com/quickstart.html" target="_blank" rel="noopener noreferrer">Quick Start User Guide</a></li><li><code>$ man salloc</code></li><li><code>$ man srun</code></li><li><code>$ man sbatch</code></li></ul><p>提交作业的命令有三个，它们分别适用于不同情况，用户可根据需要选择：</p><ul><li><code>salloc</code>：申请计算资源，随后可以登陆并使用计算资源；</li><li><code>srun</code>：申请计算资源并实时运行程序，会阻塞终端；</li><li><code>sbatch</code>：申请计算资源并随后运行程序，不会阻塞终端。</li></ul><p>这三个命令的命令行选项大多相同，我们在此列举一些常用的选项并作一点注释，方便大家理解。
各命令的使用在后续小节以例子的形式给出。</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>列表中的尖括号内是用户给的参数。</p></div></div><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td><code>-p, --partition=&lt;names&gt;</code></td><td>指定分区名称。</td></tr><tr><td><code>-N, --nodes=&lt;minnodes[-maxnodes]&gt;</code></td><td>请求特定的节点数量，给两个参数就是请求一定范围内的节点。</td></tr><tr><td><code>-n, --ntasks=&lt;number&gt;</code></td><td>指定要执行的任务（进程）数量，请求分配相应的资源。默认是一个节点执行一个任务。</td></tr><tr><td><code>--ntasks-per-node=&lt;ntasks&gt;</code></td><td>请求在每个节点上执行 <code>ntasks</code> 个任务。<strong>[1]</strong></td></tr><tr><td><code>-c, --cpus-per-task=&lt;ncpus&gt;</code></td><td>请求给每个任务分配 <code>ncpus</code> 个 CPU。<strong>[2]</strong><br>不加这个选项，控制器会试着为每个任务分配一个 CPU。</td></tr><tr><td><code>-o, --output=&lt;filename pattern&gt;</code></td><td>指明将 stdout 重定向到某个文件，即打印标准输出。<br>如果不指定 <code>--error</code>，则错误信息也输出到这个文件里。</td></tr><tr><td><code>-e, --error=&lt;filename pattern&gt;</code></td><td>指明将 stderr 重定向到某个文件，即打印错误信息。</td></tr><tr><td><code>-t, --time=&lt;time&gt;</code></td><td>为作业指定时间限制。格式为<br>&quot;minutes&quot;, &quot;minutes:seconds&quot;, <br>&quot;hours:minutes:seconds&quot;, &quot;days-hours&quot;, <br>&quot;days-hours:minutes&quot;, &quot;days-hours:minutes:seconds&quot;</td></tr><tr><td><code>-J, --job-name=&lt;jobname&gt;</code></td><td>指定作业的名称，便于用户识别自己提交的作业。</td></tr><tr><td><code>-w, --nodelist=&lt;hosts&gt;</code></td><td>指定运行程序的节点，语法见手册。</td></tr><tr><td><code>-F, --nodefile=&lt;node file&gt;</code></td><td>提供一个文件来指定运行程序的节点。</td></tr><tr><td><code>-x, --exclude=&lt;hosts&gt;</code></td><td>排除一些节点，语法见手册。</td></tr><tr><td><code>-D, --chdir=&lt;path&gt;</code></td><td>执行进程前，先切换到另一个路径。默认路径为用户执行 Slurm 命令的当前路径。<br>可以使用绝对路径或者相对于当前路径的路径。</td></tr><tr><td><code>--mincpus=&lt;n&gt;</code></td><td>要求每节点至少有 <code>n</code> 个 CPU。</td></tr><tr><td><code>--comment=&lt;string&gt;</code></td><td>给作业加个注释。<br>注释中有空格或特殊字符时，要加引号。</td></tr><tr><td><code>--deadline=&lt;OPT&gt;</code></td><td>给作业设定期限，到期还未结束就移除这个作业。格式为<br>HH:MM<!-- -->[:SS][AM\|PM]<br>MMDD<!-- -->[YY]<!-- --> or MM/DD<!-- -->[/YY]<!-- --> or MM.DD<!-- -->[.YY]<br>MM/DD<!-- -->[/YY]<!-- -->-HH:MM<!-- -->[:SS]<br>YYYY-MM-DD[THH:MM<!-- -->[:SS]<!-- -->]]</td></tr></tbody></table><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>脚注</h5></div><div class="admonition-content"><p><strong>[1]</strong> <code>--ntasks</code> 优先于 <code>--ntasks-per-node</code>，如果两个一起用，则<code>--ntasks-per-node</code>会被当成单节点任务数量的上限。</p><p><strong>[2]</strong> <code>-c</code> 一般与 <code>-n</code> 配合使用，否则，Slurm 会尽量把进程塞满节点。考虑如下例子。
假设节点有8个 CPU，<code>-N 4 -c 3</code> 意味着请求4个节点，每个节点1个进程（默认），每进程3个 CPU。
但 Slurm 可能只分配2个节点，每节点2个进程，每进程3个 CPU。</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="salloc---申请计算资源"><code>salloc</code> - 申请计算资源<a class="hash-link" href="#salloc---申请计算资源" title="Direct link to heading">​</a></h2><p>用户可以先申请计算资源，再使用 SSH 登陆到分配给自己的节点上完成操作。这种模式便于用户调试程序，但要注意资源使用的时限，超过时限会自动断开连接。</p><p>目前，绝大多数能在 <em>node01</em> 上完成的工作都能在远程节点上完成。因此，如果用户想编译程序、调试程序，可以使用 <code>salloc</code> 申请一个或多个节点，再 SSH 到这些节点上完成工作。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="基本用法">基本用法<a class="hash-link" href="#基本用法" title="Direct link to heading">​</a></h3><p>当用户申请了节点并使用 SSH 登陆到节点上时，Slurm 会给用户分配一个 shell，因此，当用户退出时，需要使用两次 <code>exit</code>。下面我们在 <code>Balerion</code> 分区申请1个节点，并登陆到这个节点上。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ salloc -N </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> -c </span><span class="token number" style="color:#36acaa">12</span><span class="token plain"> -t </span><span class="token number" style="color:#36acaa">30</span><span class="token plain">:00 -p Balerion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">salloc: Granted job allocation </span><span class="token number" style="color:#36acaa">95</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">salloc: Waiting </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> resource configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">salloc: Nodes node21 are ready </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> job</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>上述命令指定了分区 <code>-p Balerion</code>，节点数量 <code>-N 1</code>，CPU 数量 <code>-c 12</code>，资源使用的时限 <code>-t 30:00</code>。申请成功后，用户会进入由 Slurm 创建的 shell。</p><p>随后，使用 SSH 登陆到节点 <code>node01</code> 并执行操作。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> node21</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>目前全节点共享的存储空间只有 <code>$HOME/</code> 和 <code>$HOME/data/</code>。<code>$HOME/</code> 的空间较小，请尽量使用 <code>$HOME/data/</code>。若要使用计算节点的本地存储，可以用<code>/tmp</code>。</p></div></div><p>完成操作后，如果不再使用这个节点的计算资源，则退出。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">logout</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connection to node21 closed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">salloc: Relinquishing job allocation </span><span class="token number" style="color:#36acaa">95</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>此时，节点 <code>node21</code> 已经可以重新分配给其他作业了。</p><p>使用 <code>--exclusive</code> 参数，可以独占节点而不用指定任务数量、CPU 数量。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ salloc -N1 --exclusive -t </span><span class="token number" style="color:#36acaa">30</span><span class="token plain">:00 -p Balerion</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="与screen或tmux配合使用">与<code>screen</code>或<code>tmux</code>配合使用<a class="hash-link" href="#与screen或tmux配合使用" title="Direct link to heading">​</a></h3><p>使用 <code>screen</code> 或 <code>tmux</code> 可以创建在后台运行的会话。最常见的是在登陆节点上使用它们来保持自己的SSH、SFTP 连接，以便下次连接到登陆节点时能恢复。</p><p>这些工具同样可以用于保存 <code>salloc</code> 申请资源后由 Slurm 分配的 shell。我们只要在一个创建好的会话里面申请资源即可。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">screen</span><span class="token plain"> -S myalloc                     </span><span class="token comment" style="color:#999988;font-style:italic"># 创建会话</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ salloc -N1 --exclusive -p Vhagar      </span><span class="token comment" style="color:#999988;font-style:italic"># 申请资源</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>执行以上两行命令后，即使网络中断，也可以通过命令恢复之前的会话。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">screen</span><span class="token plain"> -r myalloc</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Terminal multiplexers</h5></div><div class="admonition-content"><p>像 <code>screen</code> 和 <code>tmux</code> 这样能创建多个&quot;伪&quot;终端的软件被称为 <em>Terminal multiplexers</em>，具体用法可参考官方网站或浏览集群文档中的博客。</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="srun---提交作业步"><code>srun</code> - 提交作业步<a class="hash-link" href="#srun---提交作业步" title="Direct link to heading">​</a></h2><p>参考：</p><ul><li><code>$ man srun</code></li></ul><p><code>srun</code> 在申请计算资源后会立即执行用户提供的二进制文件，Slurm 会为它创建一个作业步。作业执行时会输出到标准输出，直接执行该命令会阻塞终端。它的参数与 <code>salloc</code> 类似。</p><p>下面我们申请一个节点（可以指定节点），开两个进程，每个进程都执行相同的命令：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ srun -N </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> -n </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hostname</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ srun -w node06 -n </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hostname</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node06</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node06</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ srun -N </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hostname</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node06</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>可以发现，在这三条命令中，<code>hostname</code> 都执行了两次。换句话说，申请的资源数量就是使用的资源数量。这是 <code>srun</code> 最基本的用法：申请资源，并完全使用这些资源。</p><p>在后续章节中，我们会看到另一种用法，即申请资源后只使用申请的一部分资源。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="sbatch---提交作业"><code>sbatch</code> - 提交作业<a class="hash-link" href="#sbatch---提交作业" title="Direct link to heading">​</a></h2><p><code>sbatch</code> 用于申请资源并执行用户提供的脚本，Slurm 会为它创建一个作业，一个作业里面可以有多个 <code>srun</code> （多个作业步）。与 <code>srun</code> 不同的是，它不会阻塞终端。</p><p>如果作业运行时间较长，建议用这个命令。它的参数与 <code>srun</code> 一样。接下来我们重点介绍一下它的使用方法，这部分的很多内容都是适用于 <code>salloc</code> 和 <code>srun</code> 的。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="命令格式">命令格式<a class="hash-link" href="#命令格式" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sbatch </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> script </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>使用 <code>sbatch</code> 时，要指明申请的资源数量，如节点数、任务数、CPU数等；还要指明待执行的脚本名称。随后，Slurm 会分配相应的资源（或挂起作业），并将用户的脚本拷贝到计算节点上执行。其中，脚本名必须提供给 sbatch。</p><p>例如，我们想跑一个程序（记为 <code>myprog</code>）。我们会希望在跑之前先编译，跑完后输出结果并且清理一下编译过程中产生的文件。这个工作可以全部写在脚本中提交。假设脚本为 <code>mybatch.sh</code>。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> mybatch.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#!/bin/sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -J compile-and-run</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -o %x-%j.log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -p Vhagar</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -n 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    module load GCC         </span><span class="token comment" style="color:#999988;font-style:italic"># 加载所需的编译器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gcc myprog.c -o myprog  </span><span class="token comment" style="color:#999988;font-style:italic"># 编译</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    srun myprog             </span><span class="token comment" style="color:#999988;font-style:italic"># 执行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> myprog               </span><span class="token comment" style="color:#999988;font-style:italic"># 清理文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sbatch mybatch.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>上述脚本分为两大部分，第一部分是以 <code>#SBATCH</code> 开头的资源申请部分，其解释如下：</p><ul><li><code>-J myjob</code> 指定作业的名称，便于用户从多个已经提交的作业中识别它。不指定名称的话，系统会自动分配一个。</li><li><code>-o %x-%j.log</code> 指定作业的输出位置。<code>%x</code> 和 <code>%j</code> 是替换符，分别表示作业名和作业编号。关于替换符的说明，请参考手册 <code>man sbatch</code>。</li><li><code>-p Vhagar</code> 指定分区。使用前请通过 <code>sinfo</code>、<code>snodes</code> 等命令确认哪个分区有空闲节点，否则作业可能要排队等待。</li><li><code>-n 1</code> 指定任务数量。在这里我们只要求执行1个进程。</li></ul><p>第二部分是执行部分，也就是作业步。如果分配了多个节点，被提交的脚本 <code>mybatch</code> 会交由第一个节点执行。这些作业步大致有三类命令：</p><ul><li>加载环境变量：环境变量会从第一个节点广播到其他所有计算节点。例如 <code>module GCC</code>，加载之后，每个计算节点都能使用 <code>GCC</code> 的同一版本。</li><li>不带 <code>srun</code> 的命令：会在第一个节点上执行。因此 <code>gcc ...</code> 这句编译命令和 <code>rm ...</code> 这句清理命令，都只在第一个节点上执行。</li><li>带 <code>srun</code> 的命令：会在所有节点上执行，是并行任务。因此 <code>srun myprog</code> 这句会在所有申请到的计算节点上执行。</li></ul><p>执行完毕后，计算节点的输出（包括 <code>stdout</code> 和 <code>stderr</code>）都可以在输出文件中看到。默认的输出文件名称为 <code>slurm-作业名.out </code>，这里的例子中使用 <code>-o</code> 参数指定了一个输出文件名称。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="命令行选项和参数">命令行选项和参数<a class="hash-link" href="#命令行选项和参数" title="Direct link to heading">​</a></h3><p>由脚本中 <code>#SBATCH</code> 指定的选项和由命令行直接输入的选项是一样的。例如，以下脚本和命令可以达到和前例相同的效果。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> mybatch.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#!/bin/sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -J compile-and-run</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -o %x-%j.log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    module load GCC         </span><span class="token comment" style="color:#999988;font-style:italic"># 加载所需的编译器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gcc myprog.c -o myprog  </span><span class="token comment" style="color:#999988;font-style:italic"># 编译</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    srun myprog             </span><span class="token comment" style="color:#999988;font-style:italic"># 执行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> myprog               </span><span class="token comment" style="color:#999988;font-style:italic"># 清理文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sbatch -p Vhagar -n </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> mybatch.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="作业的时限">作业的时限<a class="hash-link" href="#作业的时限" title="Direct link to heading">​</a></h3><p>执行时间较长的作业需要手动指定时间限制，因为默认的时间限制可能不满足要求。选项 <code>-t</code> 的格式我们在前面总结过了。例如，我们可以指定时间为数分钟甚至数天。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">## 时限为30分钟</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -t 30:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## 时限为12小时</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -t 12:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## 时限为2天零12小时</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -t 2-12:00:00</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>如果需要给作业设置一个期限，让作业到期就被终止，可以用 <code>--deadline</code>。这个选项可以在作业提交之后通过 <code>scontrol</code> 附加上去。</p><p>某些情况下，我们可能希望自己的作业在特定时间执行，或者在数小时之后执行。比如定期跑一个清理脚本，跑一个数据分析软件或者脚本之类的。此时可以用 <code>--begin</code> 选项来完成。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">## 当天晚上9点开始</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --begin=21:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## 6小时以后开始</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --begin=now+6hour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## 2100年1月1日凌晨开始</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --begin=2100-01-01T00:00:00</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="作业的依赖关系">作业的依赖关系<a class="hash-link" href="#作业的依赖关系" title="Direct link to heading">​</a></h3><p>一个作业可以设置与其他作业的依赖关系。考虑以下场景：</p><p>我们有不同版本的代码需要编译（使用不同编译器），这些编译后的程序我们要同时提交运行。一种解决方案是，分为2个脚本完成：脚本 A 负责一个接一个地编译，这样能避免多个编译过程产生相同的中间文件（如 <code>*.o</code> 文件）相互覆盖；脚本 B 负责把编译后的程序提交给集群去执行。</p><p><code>mybatchA</code> 中的选项没什么特别的。提交之后可以看到它的作业编号 <code>JobID</code>，假设是 103。接下来，<code>mybatchB</code>中要加上一个选项：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -d afterok:103</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>这一句指明了，<code>mybatchB</code> 会在 <code>mybatchA</code> 成功执行时才会执行。除此之外，还有其他的依赖，例如：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">## 在作业 103 开始执行之后</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -d after:103</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## 在作业 103 和 104 都失败之后，失败的原因有很多</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -d afternotok:103 104</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## 单例作业，在所有同名、同用户的作业都结束后才执行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -d singleton</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>在提交作业时，多个作业的作业名是可以重复的，因此<code>singleton</code> 有时会很有用的，它保证当前任务执行时没有和它作业名、用户名相同的任务。</p><p>在手册中可以看到 <code>-d</code> 选项的所有参数。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="scancel---取消作业"><code>scancel</code> - 取消作业<a class="hash-link" href="#scancel---取消作业" title="Direct link to heading">​</a></h2><p>该命令用于取消已提交的作业。可以通过参数指定作业、筛选条件等。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ scancel </span><span class="token number" style="color:#36acaa">103</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>取消某一用户 <code>hpcer</code>（通常是自己的）所有作业，使用如下命令：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ scancel -u hpcer</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="scontrol-update---更新作业相关信息"><code>scontrol update</code> - 更新作业相关信息<a class="hash-link" href="#scontrol-update---更新作业相关信息" title="Direct link to heading">​</a></h2><p><code>scontrol</code> 的子命令 <code>update</code> 可用于更新各种 Slurm 对象。其中，<code>scontrol update job</code> 用于更新一个已提交的作业的信息。如果作业提交后发现时间写短了，或者想附加一些参数，用户应该使用这个命令更新，而不是取消作业再重新提交。</p><p>命令的格式可以为：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">scontrol update </span><span class="token assign-left variable" style="color:#36acaa">job</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">JobID </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Attr1</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Value1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Att2</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Value2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>其中，<code>JobID</code> 是要更新的作业编号，<code>Attr</code> 和 <code>Value</code> 分别是待更新的作业属性和值。例如，我们要更新编号为 <code>103</code> 的作业，把它的时限调整为 <code>7</code> 天整。</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ scontrol update </span><span class="token assign-left variable" style="color:#36acaa">job</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">103</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">TimeLimit</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">7</span><span class="token plain">-00</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p><code>job=103</code> 可以写成 <code>job 103</code>。属性名称<code>TimeLimit</code> 不区分大小写，可以写成 <code>timelimit</code>。</p></div></div><p>属性的名字可以通过以下命令查看：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ scontrol show job </span><span class="token number" style="color:#36acaa">103</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="sbcast---发送文件"><code>sbcast</code> - 发送文件<a class="hash-link" href="#sbcast---发送文件" title="Direct link to heading">​</a></h2><p>该命令用于发送文件到计算节点上。使用这个命令之前，请仔细阅读手册。如果在脚本中把文件发送到计算节点上，请同时清理这些文件。</p><p>一般情况下，尽量使用共享存储空间<code>$HOME/data</code>，而非<code>sbcast</code>命令。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hpcde/cluster-docs/blob/master/docs/users/slurm/02-quickstart.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2020-12-15T11:37:43.000Z">12/15/2020</time></b> by <b>one</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/cluster-docs/docs/users/slurm/basics"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Slurm 基本概念</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/cluster-docs/docs/users/slurm/mpi-omp"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">提交 OpenMP/MPI 作业</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#常用命令" class="table-of-contents__link toc-highlight">常用命令</a></li><li><a href="#快速入门" class="table-of-contents__link toc-highlight">快速入门</a><ul><li><a href="#查看集群状态" class="table-of-contents__link toc-highlight">查看集群状态</a></li><li><a href="#运行自己的程序-srun" class="table-of-contents__link toc-highlight">运行自己的程序 (srun)</a></li><li><a href="#运行自己的程序-sbatch" class="table-of-contents__link toc-highlight">运行自己的程序 (sbatch)</a></li><li><a href="#仅申请资源-salloc" class="table-of-contents__link toc-highlight">仅申请资源 (salloc)</a></li></ul></li><li><a href="#查看分区和节点信息" class="table-of-contents__link toc-highlight">查看分区和节点信息</a><ul><li><a href="#sinfo" class="table-of-contents__link toc-highlight"><code>sinfo</code></a></li><li><a href="#snodes" class="table-of-contents__link toc-highlight"><code>snodes</code></a></li></ul></li><li><a href="#查看作业队列" class="table-of-contents__link toc-highlight">查看作业队列</a><ul><li><a href="#squeue" class="table-of-contents__link toc-highlight"><code>squeue</code></a></li><li><a href="#showq" class="table-of-contents__link toc-highlight"><code>showq</code></a></li></ul></li><li><a href="#sacct---查看作业计费信息" class="table-of-contents__link toc-highlight"><code>sacct</code> - 查看作业计费信息</a></li><li><a href="#scontrol-show---查看-slurm-配置" class="table-of-contents__link toc-highlight"><code>scontrol show</code> - 查看 Slurm 配置</a></li><li><a href="#如何提交作业" class="table-of-contents__link toc-highlight">如何提交作业</a></li><li><a href="#salloc---申请计算资源" class="table-of-contents__link toc-highlight"><code>salloc</code> - 申请计算资源</a><ul><li><a href="#基本用法" class="table-of-contents__link toc-highlight">基本用法</a></li><li><a href="#与screen或tmux配合使用" class="table-of-contents__link toc-highlight">与<code>screen</code>或<code>tmux</code>配合使用</a></li></ul></li><li><a href="#srun---提交作业步" class="table-of-contents__link toc-highlight"><code>srun</code> - 提交作业步</a></li><li><a href="#sbatch---提交作业" class="table-of-contents__link toc-highlight"><code>sbatch</code> - 提交作业</a><ul><li><a href="#命令格式" class="table-of-contents__link toc-highlight">命令格式</a></li><li><a href="#命令行选项和参数" class="table-of-contents__link toc-highlight">命令行选项和参数</a></li><li><a href="#作业的时限" class="table-of-contents__link toc-highlight">作业的时限</a></li><li><a href="#作业的依赖关系" class="table-of-contents__link toc-highlight">作业的依赖关系</a></li></ul></li><li><a href="#scancel---取消作业" class="table-of-contents__link toc-highlight"><code>scancel</code> - 取消作业</a></li><li><a href="#scontrol-update---更新作业相关信息" class="table-of-contents__link toc-highlight"><code>scontrol update</code> - 更新作业相关信息</a></li><li><a href="#sbcast---发送文件" class="table-of-contents__link toc-highlight"><code>sbcast</code> - 发送文件</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/cluster-docs/docs/users/getting-started">User Manual</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://git.hpcer.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">HPCer Git<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://hub.hpcer.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">HPCer Hub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="http://status.hpc.hpcer.dev/zabbix/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cluster Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/cluster-docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/hpcde/cluster-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Doc Source on Git<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://hpcde.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">HPCDE lab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/cluster-docs/help">Help</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://hpcde.github.io/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_gHmE"><img src="/cluster-docs/img/oss_logo.svg" alt="HPCer cluster" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/cluster-docs/img/oss_logo.svg" alt="HPCer cluster" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></a></div><div class="footer__copyright">Copyright © 2022 HPCDE lab. Built with Docusaurus.</div></div></div></footer></div>
<script src="/cluster-docs/assets/js/runtime~main.540aceb6.js"></script>
<script src="/cluster-docs/assets/js/main.45e5c709.js"></script>
</body>
</html>